<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../shared-styles.html">

<dom-module id="store-item" include="shared-styles">
  <template>
    <style>
      :host {
        display: block;
      }

      paper-card {
        --paper-card-header-image-text: {
          span {
            text-decoration: line-through;
          }
        }
      }
    </style>
    <paper-card
      id="card"
      heading="{{product.actual_price}}"
      image="{{product.image}}">
      <div class="card-content">{{product.name}}</div>
      <div class="card-actions">
        <paper-icon-button icon="favorite"></paper-icon-button>
        <paper-icon-button icon="add-shopping-cart"></paper-icon-button>
      </div>
    </paper-card>
  </template>

  <script>
    Polymer({

      is: 'store-item',

      properties: {
        product: Object
      },

      observers: [
        '_setHeading(product.on_sale, product.regular_price, product.actual_price, product.discount_percentage)'
      ],

      _setHeading: function(onSale, regular, actual){
        if(!onSale) return;
        var heading = this.$.card.querySelector('.title-text');
        heading.innerHTML = '<span>' + regular + '</span> ' + actual;
      }
    });
  </script>
</dom-module>
